/*
 * 基准样式，相当于 reset.css，使主题在不同平台下有统一的表现。
 * 各个属性的默认值为 chrome 的默认样式，见 variables/default.scss。
 */

// 覆盖 typora 的主题变量
:root {
  --text-color: #{$font-color};
  --bg-color: #{$body-bg-color};
  --side-bar-bg-color: #{$body-bg-color};
  --active-file-bg-color: #{$body-bg-color};
  --rawblock-edit-panel-bd: #{$code-bg-color};
  --window-border: 0 solid #{$body-bg-color};
  --control-text-color: #{$font-color};
  --primary-color: #{$primary-color};
  --primary-btn-border-color: #{$primary-color};
  --active-file-border-color: #{$primary-color};
  --primary-btn-text-color: #{$primary-color};
  --item-hover-text-color: #{$primary-color};
  --meta-content-color: #{$primary-color};
  --search-select-text-color: #{$primary-color};
  --heading-char-color: #{$primary-color};
  /* Mermaid diagrams*/
  --mermaid-theme: #{$mermaid-theme};
}

#write {
  line-height: $line-height;
  -webkit-text-size-adjust: 100%;
  max-width: $md-body-max-width;
  margin: $md-body-mg-v $md-body-mg-h;
  padding: $md-body-pd-v $md-body-pd-h;
  font-family: $font-family;
  font-size: $font-size;
  color: $font-color;

  * {
    -moz-box-sizing: border-box;
    -webkit-box-sizing: border-box;
    box-sizing: border-box;
  }

  > *:first-child {
    margin-top: 0 !important;
  }

  > *:last-child {
    margin-top: 0 !important;
  }

  /* spacing */

  p,
  details,
  dl,
  ol,
  ul,
  xmp,
  plaintext,
  listing,
  blockquote,
  table,
  figure,
  hr {
    margin-top: $block-mg-t;
    margin-bottom: $block-mg-b;
  }

  /* block */

  h1 {
    font-size: $h1-font-size;
    font-weight: $h1-font-weight;
    margin-top: $h1-mg-t;
    margin-bottom: $h1-mg-b;
    margin-left: 0;
    margin-right: 0;
  }

  h2 {
    font-size: $h2-font-size;
    font-weight: $h2-font-weight;
    margin-top: $h2-mg-t;
    margin-bottom: $h2-mg-b;
    margin-left: 0;
    margin-right: 0;
  }

  h3 {
    font-size: $h3-font-size;
    font-weight: $h3-font-weight;
    margin-top: $h3-mg-t;
    margin-bottom: $h3-mg-b;
    margin-left: 0;
    margin-right: 0;
  }

  h4 {
    font-size: $h4-font-size;
    font-weight: $h4-font-weight;
    margin-top: $h4-mg-t;
    margin-bottom: $h4-mg-b;
    margin-left: 0;
    margin-right: 0;
  }

  h5 {
    font-size: $h5-font-size;
    font-weight: $h5-font-weight;
    margin-top: $h5-mg-t;
    margin-bottom: $h5-mg-b;
    margin-left: 0;
    margin-right: 0;
  }

  h6 {
    font-size: $h6-font-size;
    font-weight: $h6-font-weight;
    margin-top: $h6-mg-t;
    margin-bottom: $h6-mg-b;
    margin-left: 0;
    margin-right: 0;
  }

  p {
    margin-left: 0;
    margin-right: 0;
  }

  pre,
  xmp,
  plaintext,
  listing {
    font-family: $code-font-family;
  }

  blockquote {
    > :first-child {
      margin-top: 0;
    }

    > :last-child {
      margin-bottom: 0;
    }
  }

  hr {
    border-style: $hr-bd-style;
    border-width: $hr-bd-width;
  }

  img {
    max-width: 100%;
    height: auto;
  }

  /* list */

  li {
    word-wrap: break-all;
  }

  li + li {
    margin-top: $li-mg-t;
  }

  ul ul,
  ol ul,
  ul ol,
  ol ol {
    margin-top: 0;
    margin-bottom: 0;
  }

  .task-list-item {
    list-style-type: none;
  }

  /* inline */

  a {
    color: $link-color;
    text-decoration: $link-decoration;
  }

  a img {
    border: none;
  }

  b,
  strong {
    font-weight: $bold-font-weight;
  }

  i,
  cite,
  em,
  var,
  address,
  dfn {
    font-style: $italic-font-style;
  }

  code,
  kbd,
  tt,
  samp {
    font-family: $code-font-family;
  }

  mark {
    color: $font-color;
    padding: 0.2em 0;
    background-color: $mark-bg-color;
  }

  del,
  s {
    color: $del-font-color;
  }

  /* table */

  table {
    color: $table-font-color;
    border-collapse: collapse;
    background-color: $table-bg-color;
    border-spacing: $table-border-spacing;
    font-size: $table-font-size;
  }

  th,
  td {
    border-color: $border-color;
    border-width: $table-border-width;
    border-style: $table-border-style;
  }

  th {
    padding: $th-pd-v $th-pd-h;
    font-size: $th-font-size;
    font-weight: $th-font-weight;
  }

  td {
    padding: $td-pd-v $td-pd-h;
    font-size: $td-font-size;
    font-weight: $td-font-weight;
  }

  /* code block */

  pre.md-fences,
  pre.md-meta-block,
  .md-rawblock-control:not(.md-rawblock-tooltip) .md-rawblock-input {
    border-radius: 3px;
    border: 1px solid $border-color;
    padding: $prism-pd;
    background-color: $code-bg-color;
  }

  .CodeMirror div.CodeMirror-cursor {
    border-color: $font-color;
  }

  // fix: 直接在 markdown 写 html 源码，编辑框的样式

  .md-math-block,
  .md-rawblock {
    margin-top: 1em; // 正好是右上角 tooltip
    margin-bottom: 1em;
  }

  .md-rawblock {
    > .md-rawblock-tooltip {
      background-color: $code-bg-color;
      transition: 0.5s;
      display: block;
      visibility: hidden;
      opacity: 0;
    }
    &:hover > .md-rawblock-tooltip {
      transition: 0.5s;
      visibility: visible;
      opacity: 1;
      animation: none;
    }
  }

  .md-rawblock-control:not(.md-rawblock-tooltip) {
    padding-left: 0px;
    padding-right: 0px;
  }
}
